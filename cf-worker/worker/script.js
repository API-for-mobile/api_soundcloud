!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";const o=n(1);addEventListener("fetch",e=>{if("GET"!==e.request.method)return new Response("Method not allowed",{status:500});e.respondWith(o(e))})},function(e,t,n){"use strict";const o=n(2),r=n(3);n(4),n(5);e.exports=async function(e){return async function(e){const t=new o,n=e.request;t.get("/api/search/tracks.*",e=>r.tracks(n)),t.get("/api/search/albums.*",e=>r.albums(n)),t.get("/api/search/playlists.*",e=>r.playlists(n));return await t.route(n)}(e)}},function(e,t,n){"use strict";const o=e=>t=>t.method.toLowerCase()===e.toLowerCase(),r=o("connect"),s=o("delete"),i=o("get"),a=o("head"),c=o("options"),l=o("patch"),u=o("post"),p=o("put"),d=o("trace"),h=e=>t=>{const n=new URL(t.url).pathname;return(n.match(e)||[])[0]===n};e.exports=class{constructor(){this.routes=[]}handle(e,t){return this.routes.push({conditions:e,handler:t}),this}connect(e,t){return this.handle([r,h(e)],t)}delete(e,t){return this.handle([s,h(e)],t)}get(e,t){return this.handle([i,h(e)],t)}head(e,t){return this.handle([a,h(e)],t)}options(e,t){return this.handle([c,h(e)],t)}patch(e,t){return this.handle([l,h(e)],t)}post(e,t){return this.handle([u,h(e)],t)}put(e,t){return this.handle([p,h(e)],t)}trace(e,t){return this.handle([d,h(e)],t)}all(e){return this.handle([],e)}route(e){const t=this.resolve(e);return t?t.handler(e):new Response("resource not found",{status:404,statusText:"not found",headers:{"content-type":"text/plain"}})}resolve(e){return this.routes.find(t=>!(t.conditions&&(!Array.isArray(t)||t.conditions.length))||("function"==typeof t.conditions?t.conditions(e):t.conditions.every(t=>t(e))))}}},function(e,t,n){"use strict";e.exports={tracks:async function(e){const{searchParams:t}=new URL(e.url);let n=t.get("q");if(!n)return new Response(JSON.stringify({error:"not error"}),{headers:{"content-type":"application/json;charset=UTF-8"}});const o=t.get("page");let r;r=o&&"0"!=o?`https://api-mobile.soundcloud.com/search/tracks?q=${encodeURI(n)}&limit=24&next=${24*parseInt(o)}&client_id=Fiy8xlRI0xJNNGDLbPmGUjTpPRESPx8C`:`https://api-mobile.soundcloud.com/search/tracks?q=${encodeURI(n)}&limit=24&client_id=Fiy8xlRI0xJNNGDLbPmGUjTpPRESPx8C`;var s={method:"GET",headers:e.headers};const i=await fetch(r,s),a=(await i.json()).collection;let c=[];return a.forEach(e=>{let t=e.stream_url;if(!t){let n=e.media.transcodings;t=n[n.length-1].url}t=t.replace("https://api-mobile.soundcloud.com",""),c.push({id:e.urn,title:e.title,image:e.artwork_url_template?e.artwork_url_template.replace("{size}","t300x300"):"",duration:e.full_duration,description:e.description,username:e._embedded.user.username,media:t})}),new Response(JSON.stringify({tracks:c}),{headers:{"content-type":"application/json;charset=UTF-8"}})},albums:async function(e){const{searchParams:t}=new URL(e.url);let n=t.get("q");if(!n)return new Response(JSON.stringify({error:"not error"}),{headers:{"content-type":"application/json;charset=UTF-8"}});const o=t.get("page");let r;r=o&&"0"!=o?`https://api-mobile.soundcloud.com/search/albums?q=${encodeURI(n)}&limit=24&next=${24*parseInt(o)}&client_id=Fiy8xlRI0xJNNGDLbPmGUjTpPRESPx8C`:`https://api-mobile.soundcloud.com/search/albums?q=${encodeURI(n)}&limit=24&client_id=Fiy8xlRI0xJNNGDLbPmGUjTpPRESPx8C`;var s={method:"GET",headers:e.headers};const i=await fetch(r,s),a=(await i.json()).collection;let c=[];return a.forEach(e=>{c.push({id:e.urn,title:e.title,image:e.artwork_url_template?e.artwork_url_template.replace("{size}","t300x300"):"",count:e.track_count,description:e.description})}),new Response(JSON.stringify({albums:c}),{headers:{"content-type":"application/json;charset=UTF-8"}})},playlists:async function(e){const{searchParams:t}=new URL(e.url);let n=t.get("q");if(!n)return new Response(JSON.stringify({error:"not error"}),{headers:{"content-type":"application/json;charset=UTF-8"}});const o=t.get("page");let r;r=o&&"0"!=o?`https://api-mobile.soundcloud.com/search/playlists_without_albums?q=${encodeURI(n)}&limit=24&next=${24*parseInt(o)}&client_id=Fiy8xlRI0xJNNGDLbPmGUjTpPRESPx8C`:`https://api-mobile.soundcloud.com/search/playlists_without_albums?q=${encodeURI(n)}&limit=24&client_id=Fiy8xlRI0xJNNGDLbPmGUjTpPRESPx8C`;var s={method:"GET",headers:e.headers};const i=await fetch(r,s),a=(await i.json()).collection;let c=[];return a.forEach(e=>{c.push({id:e.urn,title:e.title,image:e.artwork_url_template?e.artwork_url_template.replace("{size}","t300x300"):"",count:e.track_count,description:e.description})}),new Response(JSON.stringify({playlists:c}),{headers:{"content-type":"application/json;charset=UTF-8"}})}}},function(e,t,n){"use strict";async function o(e){try{var t="";const n={results:e.map(e=>{const n=function(e){try{const{playlistVideoRenderer:{title:t,shortBylineText:{runs:n},thumbnail:o,videoId:r,lengthText:{simpleText:s}}}=e;return{type:0,title:t.runs[0].text,description:n[0]?n[0].text:"",image:o.thumbnails.slice(-1)[0].url,videoId:r,time:s}}catch(e){return console.log(e),null}}(e);if(n)return n;try{t=e.continuationItemRenderer.continuationEndpoint.continuationCommand.token}catch(t){return console.log(t),e}}).filter(e=>e),token:t};return console.log("-----done -------"),n}catch(e){return{}}}e.exports=async function(e){let t=e.headers.get("x-gl"),n=e.headers.get("x-hl");const{searchParams:r}=new URL(e.url);let s=r.get("playlist");var i={};if(s&&t&&n)i=await async function(e,t,n){const r=await fetch("https://www.youtube.com/playlist?list="+e,{headers:{accept:"*/*","accept-language":`${n}-${t},${n}`}});console.log("-----------------------");const s=await r.text();var i=s.substring(s.indexOf("ytInitialData"));const a=i.indexOf("{"),c=i.indexOf("};");return i=i.substring(a,c+1),o(JSON.parse(i).contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents[0].itemSectionRenderer.contents[0].playlistVideoListRenderer.contents)}(s,t.toUpperCase(),n.toLowerCase());else{let e=r.get("token");e&&t&&n&&(i=await async function(e,t,n){const r=JSON.stringify({context:{client:{hl:n,gl:t,remoteHost:"",deviceMake:"",deviceModel:"",visitorData:"",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15,gzip(gfe)",clientName:"WEB",clientVersion:"2.20210218.08.01",osName:"",osVersion:"",originalUrl:"",platform:"DESKTOP",gfeFrontlineInfo:"",clientFormFactor:"UNKNOWN_FORM_FACTOR",timeZone:"",browserName:"",browserVersion:"",screenWidthPoints:"0",screenHeightPoints:"0",screenPixelDensity:"0",screenDensityFloat:"0",utcOffsetMinutes:"0",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",mainAppWebInfo:{graftUrl:"",webDisplayMode:"WEB_DISPLAY_MODE_BROWSER"}},user:{lockedSafetyMode:!1},request:{useSsl:!0,internalExperimentFlags:[],consistencyTokenJars:[]},clickTracking:{clickTrackingParams:""},clientScreenNonce:""},continuation:e}),s=await fetch("https://www.youtube.com/youtubei/v1/browse?key=AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",{headers:{accept:"*/*","content-type":"application/json","x-origin":"https://www.youtube.com"},body:r,method:"POST"});return console.log("-----------------------"),o((await s.json()).onResponseReceivedActions[0].appendContinuationItemsAction.continuationItems)}(e,t.toUpperCase(),n.toLowerCase()))}return new Response(JSON.stringify(i),{headers:{"content-type":"application/json;charset=UTF-8"}})}},function(e,t,n){"use strict";async function o(e,t,n){const o=JSON.stringify({context:{client:{hl:n,gl:t,remoteHost:"",deviceMake:"",deviceModel:"",visitorData:"",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15,gzip(gfe)",clientName:"WEB",clientVersion:"2.20210218.08.00",osName:"",osVersion:"",originalUrl:"",platform:"DESKTOP",gfeFrontlineInfo:"",clientFormFactor:"UNKNOWN_FORM_FACTOR",timeZone:"",browserName:"",browserVersion:"",screenWidthPoints:0,screenHeightPoints:0,screenPixelDensity:1,screenDensityFloat:1,utcOffsetMinutes:0,userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",mainAppWebInfo:{graftUrl:"",webDisplayMode:"WEB_DISPLAY_MODE_BROWSER"}},user:{lockedSafetyMode:!1},request:{useSsl:!0,internalExperimentFlags:[],consistencyTokenJars:[]},clickTracking:{clickTrackingParams:""},clientScreenNonce:""},videoId:e,continuation:""}),r=await fetch("https://www.youtube.com/youtubei/v1/next?key=AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",{headers:{accept:"*/*","content-type":"application/json","x-origin":"https://www.youtube.com"},body:o,method:"POST"});console.log("-----------------------");return await async function(e){const t=await e.json();try{const e=t.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results.map(e=>{try{const{compactVideoRenderer:{title:{simpleText:t},longBylineText:{runs:n},thumbnail:o,videoId:r,lengthText:{simpleText:s}}}=e;return{type:0,title:t,description:n[0]?n[0].text:"",image:o.thumbnails.slice(-1)[0].url,videoId:r,time:s}}catch(e){return null}}).filter(e=>e);var n="";try{contents.forEach(e=>{e.continuationItemRenderer&&(n=e.continuationItemRenderer.continuationEndpoint.continuationCommand.token)})}catch(e){console.log(e)}const o={results:e,token:n};return console.log("-----done -------"),o}catch(e){return{}}}(r)}e.exports=async function(e){let t=e.headers.get("x-gl"),n=e.headers.get("x-hl");const{searchParams:r}=new URL(e.url);let s=r.get("videoId");var i={};return s&&t&&n&&(i=await o(s,t.toUpperCase(),n.toLowerCase())),new Response(JSON.stringify(i),{headers:{"content-type":"application/json;charset=UTF-8"}})}}]);